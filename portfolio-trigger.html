<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Portfolio Details</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  

  <style>
  pre[class*="language-"] {
    border-radius: 8px;
    padding: 1rem;
    font-size: 12px;
  }
  
    .text-left {
      text-align: left;
    }
  </style>

   <!-- Prism Highlight CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: EasyFolio
  * Template URL: https://bootstrapmade.com/easyfolio-bootstrap-portfolio-template/
  * Updated: Feb 21 2025 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="portfolio-details-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.webp" alt=""> -->
        <h1 class="sitename">Salsa Ainun Amalia</h1>
      </a>

      <nav id="navmenu" class="navmenu">
       <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#resume">Resume</a></li>
          <li><a href="index.html#portfolio">Portfolio</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <div class="header-social-links">
        <a href="mailto:amaliashalsa8@gmail.com" class="email"><i class="bi bi-envelope-at"></i></a>
        <a href="https://www.linkedin.com/in/salsa-ainun-amalia8/" class="linkedin"><i class="bi bi-linkedin"></i></a>
      </div>

    </div>
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title">
      <div class="breadcrumbs">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html"><i class="bi bi-house"></i> Home</a></li>
            <li class="breadcrumb-item"><a href="index.html#portfolio">Category</a></li>
            <li class="breadcrumb-item active current">Portfolio Details</li>
          </ol>
        </nav>
      </div>

      <div class="title-wrapper">
        <h1>Project Details</h1>
        <p>In this project, I was responsible for ensuring data consistency and integrity across multiple related tables within a MySQL database. The goal was to automate the synchronization of records between tables upon various data operations such as insert, update, and delete. To achieve this, I implemented a series of SQL triggers tailored to the business logic and performance considerations of the transactional data flow.</p>
      </div>
    </div><!-- End Page Title -->

    <!-- Portfolio Details Section -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up">

        <div class="row gy-4 g-lg-5">
        <div class="col-lg-6">
          
        <h3>TRIGGER AFTER UPDATE</h3>          
          <pre><code class="language-sql">CREATE TRIGGER trg_update_after_amura
AFTER UPDATE ON transaction_amura
FOR EACH ROW
BEGIN
  UPDATE transactions t
  JOIN (
    SELECT 
      transaction_id,
      created_at,
      updated_at,
      id_brand,
      channel,
      channel_type,
      user_id,
      `desc`,
      cs_name,
      price
    FROM transaction_amura
    WHERE transaction_id = NEW.transaction_id
    ORDER BY id ASC
    LIMIT 1
  ) temp ON t.transaction_id = temp.transaction_id
  SET 
    t.created_at = temp.created_at,
    t.updated_at = temp.updated_at,
    t.id_brand = temp.id_brand,
    t.channel = temp.channel,
    t.channel_type = temp.channel_type,
    t.user_id = temp.user_id,
    t.`desc` = temp.`desc`,
    t.cs_name = temp.cs_name,
    t.price = temp.price;


  UPDATE product_sales ps
  JOIN (
    SELECT 
      transaction_id,
      product,
      qty
    FROM transaction_amura
    WHERE transaction_id = NEW.transaction_id
    ORDER BY id ASC
    LIMIT 1
  ) temp_ps ON ps.transaction_id = temp_ps.transaction_id
  SET 
    ps.product = temp_ps.product,
    ps.qty = temp_ps.qty;

END
         </code></pre>
          <p>
          Trigger Logic:
          <i>
            <ol>
              <li>
                The first updates general transaction metadata (created_at, updated_at, channel, cs_name, etc.) in the transactions table.
              </li>
              <li>
                The second updates product-related information (product, qty) in the product_sales table.
              </li>
            </ol>
          </i>
        </p>
              <h3>TRIGGER AFTER INSERT</h3>
              <pre><code class="language-sql">CREATE TRIGGER trg_after_insert_transaction_amura
AFTER INSERT ON transaction_amura
FOR EACH ROW
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM transactions WHERE transaction_id = NEW.transaction_id
  ) THEN
    INSERT INTO transactions (
      transaction_id,
      created_at,
      updated_at,
      id_brand,
      channel,
      channel_type,
      user_id,
      user_name,
      receive_name,
      handphone_number,
      address,
      `desc`,
      cs_name,
      price
    )
    VALUES (
      NEW.transaction_id,
      NEW.created_at,
      NEW.updated_at,
      NEW.id_brand,
      NEW.channel,
      NEW.channel_type,
      NEW.user_id,
      NEW.user_name,
      NEW.receive_name,
      NEW.handphone_number,
      NEW.address,
      NEW.`desc`,
      NEW.cs_name,
      NEW.price
    );

    INSERT INTO product_sales (
      created_at,
      transaction_id,
      id_brand,
      product,
      qty
    )
    VALUES (
      NEW.created_at,
      NEW.transaction_id,
      NEW.id_brand,
      NEW.product,
      NEW.qty
    );
  END IF;
END
              </code></pre>
              <p>
                Trigger Logic:
              </p>
              <p>
                  <i>
                   When a new row is inserted into transaction_amura, the system checks if the transaction_id doesn't already exist in the transactions table. If the ID is new:
                        <ol>
                          <li>The transaction data is copied into the transactions table (main transaction data).</li>
                          <li>The first product from the transaction is copied into the product_sales table.</li>
                        </ol>
                    </i>
              </p>
              <h3>TRIGGER AFTER DELETE</h3>
              <pre><code class="language-sql">CREATE trg_after_delete_transaction_amura
AFTER DELETE ON transaction_amura
FOR EACH ROW
BEGIN
  DELETE FROM transactions
  WHERE transaction_id = OLD.transaction_id;

  DELETE FROM product_sales
  WHERE transaction_id = OLD.transaction_id;
END;
              </code></pre>
              <p>Trigger Logic:</p>
                  <i>
                    <p>
                      When a row is deleted from transaction_amura, the system will:
                      <ol>
                        <li>Delete the corresponding transaction from the transactions table using the same transaction_id.</li>
                        <li>Delete related product data from the product_sales table using the same transaction_id.</li>
                      </ol>
                    </p>
                  </i> 
              </div>
                            
          <div class="col-lg-6">

            <div class="position-sticky" style="top: 40px">
              <div class="portfolio-description">
                <h2>Trigger-Based Automation After Data Normalization to 2NF</h2>
                <p>
                  The project started with a denormalized table, transaction_amura, which stored all transaction details in a flat structure. To optimize data handling, especially for analysis and reporting, I normalized this table into two separate tables:
                  <ul>
                    <li>transactions: containing general transaction info</li>
                    <li>product_sales: storing item-level sales data</li>
                  </ul>
                </p>
                <p>
                  This normalization from 1NF to 2NF made querying more efficient. However, it created an unintended challenge:
                </p>
                <p>
                  The data analyst had to manually insert cleaned and processed data—pulled from marketplaces and transformed using Python and SQL—into the normalized tables one by one. Given the daily, weekly, and monthly increase in transaction volume, this manual process became overwhelming and error-prone.
                </p>
                <h2>Solution (Trigger Implementation):</h2>
                <p>
                 To address this, I created a set of MySQL triggers directly on the transaction_amura table. These triggers automate the population and synchronization of the normalized tables as follows:
                </p>
                <ol>
                  <li><strong>AFTER INSERT Trigger:</strong></li>
                    <ul>
                      <li>
                        Automatically inserts a new record into the transactions table when a new transaction appears in transaction_amura.
                      </li>
                      <li>
                        Extracts the first product listed in the transaction to insert into product_sales.
                      </li>
                   </ul> 
                  <li><strong>AFTER UPDATE Trigger:</strong></li>
                    <ul>
                      <li>Updates corresponding data in transactions and product_sales when relevant fields in transaction_amura change (e.g., user_name, channel, product, qty).</li>
                    </ul>
                   <li>
                    <strong>AFTER DELETE Trigger:</strong>
                  </li>
                    <ul>
                      <li>
                        Removes the linked records in both normalized tables when a transaction is deleted from transaction_amura.
                      </li>
                    </ul>
                  <p>This logic ensures real-time syncing between the original and normalized datasets without requiring any manual steps.</p>
                </ol>
                <h2>Result</h2>
                 <ul>
                   <li>Fully automated insertion and cleanup process.</li>
                   <li>Reduced the analyst’s workload and minimized the chance of human error.</li>
                   <li>Created a seamless pipeline where any change in the source (transaction_amura) is instantly reflected in the reporting tables.</li>
                 </ul>
                <h2>Impact</h2>
                  <ul>
                    <li>Saved 80% of manual entry time per day.</li>
                    <li>Reduced human error in data insertion and deletion.</li>
                    <li>Enabled analysts to focus more on insights and less on routine tasks.</li>
                  </ul>
                
                <h2 class="text-left">Takeaway</h2>
                <p>
                  <i>"Efficiency isn’t just about speed, it’s about freeing minds from repetition to focus on results."</i>
                </p>
                <p>Implementing post-insert triggers can significantly enhance data workflows, especially when bridging between raw transactional tables and normalized analytical schemas. It also offloads manual burdens from analysts, allowing them to focus more on insight-generation than data wrangling.</p>

              </div>

              <div class="portfolio-info mt-5">
                <h3>Project information</h3>
                <ul>
                  <li><strong>Category</strong>Database Management & Optimizations</li>
                  <li><strong>Tools</strong>MySQL Workbench</li>
                  <li><strong>Project date</strong>July - Present, 2025</li>
                </ul>
              </div>
            </div>

          </div>
        

    </section><!-- /Portfolio Details Section -->

  </main>

  <footer id="footer" class="footer">

    <div class="container">
      <div class="copyright text-center ">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">EasyFolio</strong> <span>All Rights Reserved</span></p>
      </div>
      <div class="social-links d-flex justify-content-center">
        <a href="mailto:amaliashalsa8@gmail.com" class="email"><i class="bi bi-envelope-at"></i></a>
        <a href="https://www.linkedin.com/in/salsa-ainun-amalia8/" class="linkedin"><i class="bi bi-linkedin"></i></a>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Prism Core -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

<!-- Komponen SQL -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>

<!-- Plugin Toolbar (label bahasa) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>

</body>

</html>
